
body {
    background: url("../assets/rating-bg.png") no-repeat center center fixed;
    background-size: cover;
    background-color: rgba(0, 0, 0, 0.4);
    font-family: mulish;
    color: #ffffff;
    width: 100%;
    min-height: 100vh;
    height: 100%;
    display: flex; 
    flex-direction: column;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    transform: none !important;
}

input,
textarea,
button,
select {
    font-family: inherit;
}

/* =====================================
   MIXINS & PLACEHOLDERS
===================================== */
@mixin transition($duration: 0.3s,
$property: all,
$timing: ease-out) {
    transition: $property $duration $timing;
}

@mixin flex($direction: row,
$justify: flex-start,
$align: stretch) {
    display: flex;
    flex-direction: $direction;
    justify-content: $justify;
    align-items: $align;
}

@mixin brad($radius: 1rem) {
    border-radius: $radius;
}

@mixin bg($color: rgba(255, 255, 255, 0.2)) {
    background-color: $color;
}

@mixin hover-bg($color: rgba(234, 243, 255, 0.5)) {
    &:hover {
        background: $color;
    }
}

@mixin responsive-title($desktop: 3rem,
$tablet: 2rem,
$mobile: 1.5rem) {
    font-size: $desktop;
    @media (max-width: 1000px) {
        font-size: $tablet;
    }
    @media (max-width: 700px) {
        font-size: $mobile;
    }
}

%card-base {
    background: rgba(128, 128, 128, 0.5);
    @include brad;
    @include flex(column,
    center,
    center);
    @include transition;
}

%circle-base {
    @include brad(50%);
    @include flex(row,
    center,
    center);
    background: #fff;
    color: var(--circle-color, #000);
}

%text-name {
    font-size: 1.25rem;
    font-weight: 600;
    line-height: 130%;
}

%text-location {
    font-size: 0.9rem;
    color: #bbb;
    @include flex(row,
    center,
    center);
    gap: 0.125rem;
    margin-top: 0.5rem;
    line-height: 0.8125rem;
}

%text-status {
    font-size: 0.75rem;
    color: #00c3ff;
    margin-top: 0.5rem;
    line-height: 0.8125rem;
}

%section-title {
    @include responsive-title();
    margin-top: 4rem;
    text-align: center;
    font-weight: 700;
}

%table-base {
    background: rgba(128, 128, 128, 0.5);
    @include brad;
    margin-top: 4rem;
    border-collapse: collapse;
}

:root {
    --color-aaa: #009a44;
    --color-aa: #91bd00;
    --color-a: #a5c91f;
    --color-bbb: #d9b600;
    --color-bb: #d9ce04;
    --color-b: #efe31e;
    --color-ccc: #d96400;
    --color-cc: #d99c00;
    --color-c: #f0ae13;
    --color-d: #d92804;
    --color-NAPP: #00345c;
}

/* =====================================
   LAYOUT & SWITCHER
===================================== */
.layout {
    max-width: 1200px;
    width: 100%;
    min-height: auto;
    background-color: rgba(0, 0, 0, 0.2);
    margin: 4rem auto;
    @include brad;
}

.switcher {
    width: 100%;
    min-height: 4.125rem;
    @include flex();
    gap: 1rem;
    &__btn {
        width: 100%;
        @include brad;
        background-color: rgba(255, 255, 255, 0.4);
        gap: 0.625rem;
        @include flex(row,
        center,
        center);
        font-size: 1.25rem;
        font-weight: 600;
        cursor: pointer;
        border: none;
        color: #fff;
    }
    &__btn--active {
        background: #1a4c80;
    }
    &__icon {
        width: 1.5rem;
        height: 1.5rem;
    }
}

.variant {
    display: none;
    &--active {
        display: block;
    }
    &__heading {
        @extend %section-title;
        padding: 0 2rem;
    }
    &__subtitle {
        text-align: center;
        color: #00c37d;
        font-size: clamp(1rem, 2vw, 1.5rem);
        margin-top: 1.25rem;
    }
}

/* =====================================
   CAROUSEL
===================================== */
.carousel {
    position: relative;
    @include flex(column,
    center,
    center);
    overflow: hidden;
    &__track {
        margin: 4rem auto 8rem;
        padding: 0 1rem;
        @include flex();
        flex-wrap: nowrap;
        gap: 1rem;
        @include transition;
        width: 100%;
        overflow-x: visible;
        scroll-behavior: smooth;
    }
    &__card {
        @extend %card-base;
        flex: 0 0 auto;
        width: clamp(16rem, 20vw, 18rem);
        min-height: clamp(10rem, 25vw, 15rem);
        padding: 2rem 1rem;
        @include hover-bg();
    }
    &__name {
        @extend %text-name;
    }
    &__location {
        @extend %text-location;
    }
    &__location-icon {
        width: 0.85rem;
        height: 0.75rem;
    }
    &__status {
        @extend %text-status;
    }
    &__rating {
        height: auto;
        @include flex(column,
        space-between,
        center);
        gap: 0.5rem;
    }
    &__container {
        @include flex(row,
        center,
        center);
        gap: 4rem;
        margin-bottom: 1.25rem;
    }
    &__circle {
        @extend %circle-base;
        width: clamp(3rem, 5vw, 4rem);
        height: clamp(3rem, 5vw, 4rem);
        border: 0.25rem solid currentColor;
    }
    &__grade {
        font-size: clamp(1rem, 2vw, 1.5rem);
        font-weight: bold;
    }
    &__score {
        font-size: 1.375rem;
    }
    &__icon {
        width: clamp(4rem, 8vw, 6rem);
        height: clamp(4rem, 8vw, 6rem);
        padding: 1rem;
        @include brad;
        background-color: #f4f8ff;
        @include flex(row,
        center,
        center);
        margin-bottom: 0.625rem;
    }
    &__photo {
        width: clamp(3rem, 6vw, 4.5rem);
        height: clamp(3rem, 6vw, 4.5rem);
        @include brad;
    }
    &__btn-box {
        @include flex();
        gap: 1.25rem;
        position: absolute;
        top: 23rem;
    }
    &__btn {
        background: none;
        border: none;
        cursor: pointer;
    }
    &__btn--right,
    &__btn--left {
        width: 4rem;
        height: 2.25rem;
    }
}

/* =====================================
   STATS
===================================== */
.stats {
    max-width: 75rem;
    width: 100%;
    min-height: 4.375rem;
    margin-top: 4rem;
    padding: 0 clamp(2rem, 5vw, 6.25rem);
    @include flex(row,
    space-between,
    center);
    flex-wrap: wrap;
    gap: 1rem;
    &__stat {
        border-left: 0.5rem solid #1a4c80;
        padding-left: 1rem;
        @include flex(column);
        @include transition;
        flex: 1 1 clamp(6rem, 45%, 8rem);
        margin-bottom: clamp(0rem, 1vw, 1rem);
        &:hover {
            transform: translateY(-0.375rem);
            text-shadow: 0.25rem 0.375rem 0.1875rem rgba(255, 255, 255, 0.2);
        }
    }
    &__stat-value {
        font-size: clamp(1.2rem, 2vw, 2.375rem);
        font-weight: 800;
        text-align: left;
    }
    &__stat-label {
        font-size: clamp(0.8rem, 1.5vw, 1.25rem);
        text-align: left;
    }
}

/* =====================================
   TOP-EMITTER
===================================== */
.top-emitter {
    &__list {
        display: grid;
        justify-content: center;
        justify-items: center;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
        margin-top: 4rem;
        padding: 0 1rem;
    }
    &__card {
        @extend %card-base;
        width: 100%;
        max-width: 300px;
        aspect-ratio: 1 / 1;
        position: relative;
        @include hover-bg();
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: clamp(1rem, 2vw, 2rem);
    }
    &__title {
        @extend %section-title;
    }
    &__name {
        @extend %text-name;
        font-size: clamp(0.9rem, 2vw, 1.25rem);
    }
    &__location {
        @extend %text-location;
        font-size: clamp(0.7rem, 1.5vw, 1rem);
        margin-top: clamp(0.25rem, 0.5vw, 0.625rem);
    }
    &__status {
        @extend %text-status;
        font-size: clamp(0.6rem, 1.2vw, 0.9rem);
        margin-top: clamp(0.25rem, 0.5vw, 0.625rem);
    }
    &__rating {
        position: absolute;
        top: clamp(0.8rem, 1vw, 1.5625rem);
        right: clamp(0.8rem, 2vw, 3.4375rem);
        @include flex(column,
        center,
        center);
        gap: clamp(0.25rem, 0.5vw, 0.625rem);
    }
    &__circle {
        @extend %circle-base;
        width: clamp(2rem, 5vw, 2.75rem);
        height: clamp(2rem, 5vw, 2.75rem);
        border: clamp(2px, 0.3vw, 3px) solid currentColor;
        position: relative;
    }
    &__grade {
        font-size: clamp(0.7rem, 1.5vw, 1rem);
        font-weight: bold;
    }
    &__score {
        font-size: clamp(0.8rem, 1.2vw, 0.95rem);
        position: relative;
    }
    &__icon {
        width: clamp(5rem, 15%, 7.8125rem);
        height: clamp(5rem, 15%, 7.8125rem);
        padding: clamp(0.75rem, 1.5vw, 1.125rem);
        @include brad(50%);
        background-color: var(--circle-color, #000);
        @include flex(row,
        center,
        center);
        margin-bottom: clamp(0.5rem, 1vw, 1.25rem);
    }
    &__photo {
        width: clamp(4rem, 12%, 6rem);
        height: clamp(4rem, 12%, 6rem);
        @include brad(50%);
    }
}

/* =====================================
   MAP
===================================== */
.map {
    &__container {
        @include flex(row,
        center,
        center);
    }
    &__title {
        @extend %section-title;
    }
    &__uz {
        margin-top: clamp(2rem, 3vw, 4rem);
        max-width: 75rem;
        width: 100%;
    }
    &__tooltip {
        max-width: clamp(8rem, 80vw, 14rem);
        width: auto;
        position: fixed;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: clamp(0.25rem, 1vw, 0.5rem) clamp(0.5rem, 2vw, 1rem);
        @include brad;
        font-size: clamp(0.8rem, 2vw, 1.25rem);
        line-height: 1.2;
        pointer-events: none;
        display: none;
        z-index: 999;
        word-wrap: break-word;
    }
}

/* =====================================
   CATEGORIES TABLE
===================================== */
.categories {
    &__table {
        @extend %table-base;
        width: 100%;
        height: auto;
    }
    &__row {
        border-bottom: #ffffff solid 1px;
        @include transition;
        display: flex;
        flex-direction: row;
        font-size: clamp(1rem, 1vw + 0.5rem, 1.3rem);
        &:last-child {
            border-bottom: none;
        }
    }
    &__rating {
        flex: 1;
        min-width: clamp(50px, 8vw, 100px);
        min-height: clamp(3rem, 2vw + 2.5rem, 4.875rem);
        font-weight: bold;
        @include flex(row,
        center,
        center);
        &--aaa {
            color: var(--color-aaa);
        }
        &--aa {
            color: var(--color-aa);
        }
        &--a {
            color: var(--color-a);
        }
        &--bbb {
            color: var(--color-bbb);
        }
        &--bb {
            color: var(--color-bb);
        }
        &--b {
            color: var(--color-b);
        }
        &--ccc {
            color: var(--color-ccc);
        }
        &--cc {
            color: var(--color-cc);
        }
        &--c {
            color: var(--color-c);
        }
        &--d {
            color: var(--color-d);
        }
        @include hover-bg(rgba(255, 255, 255, 0.25));
    }
    &__amount {
        flex: 1;
        min-width: clamp(50px, 8vw, 100px);
        min-height: clamp(3rem, 2vw + 2.5rem, 4.875rem);
        @include flex(row,
        center,
        center);
        @include hover-bg(rgba(255, 255, 255, 0.25));
    }
    &__title th {
        @extend %section-title;
        height: clamp(5rem, 2vw + 1rem, 7.625rem);
        font-size: clamp(1.25rem, 2vw + 0.5rem, 1.75rem);
        border: none;
    }
    &__head tr {
        font-size: clamp(1rem, 1vw + 0.25rem, 1.6rem);
        font-weight: 600;
    }
    &__head th {
        @include hover-bg(none);
    }
    &__progress-label {
        font-weight: bold;
        width: clamp(2.5rem, 1vw + 1rem, 4.0625rem);
    }
    &__progress {
        @include flex(row,
        center,
        center);
        flex: 2;
        min-width: clamp(100px, 15vw, 300px);
        gap: clamp(1rem, 1vw + 1rem, 4rem);
        min-height: clamp(3rem, 2vw + 1rem, 4.875rem);
        @include transition;
        @include hover-bg();
    }
    &__progress-bar {
        width: clamp(5rem, 10vw, 12.5rem);
        height: 1.3125rem;
        @include brad;
        background-color: #ffffff;
        overflow: hidden;
    }
    &__progress-value {
        height: 100%;
        width: 0;
        background: gray;
        @include brad;
        @include transition;
    }
}

/* =====================================
   TABLE
===================================== */
.table {
    @extend %table-base;
    color: white;
    text-align: left;
    @include flex(column);
    width: 100%;
    thead .table__row {
        border-bottom: 1px solid rgba(255, 255, 255, 0.5);
    }
    thead .table__row:first-child:hover {
        background: none;
    }
    &__row {
        min-height: 5rem;
        padding: 0 clamp(1rem, 2vw, 3.125rem);
        gap: clamp(0.5rem, 1vw, 1rem);
        border-bottom: 1px solid rgba(255, 255, 255, 0.5);
        @include flex(row,
        flex-start,
        center);
        &:hover {
            background: rgba(255, 255, 255, 0.25);
        }
        &:last-child {
            border-bottom: none;
        }
    }
    &__heading-number,
    &__heading-name,
    &__heading-region,
    &__heading-score,
    &__heading-rating {
        font-size: 1.25rem;
        font-weight: bold;
    }
    &__heading-number {
        min-width: 1.875rem;
        flex: 0 0 auto;
    }
    &__heading-name,
    &__heading-region {
        flex: 1 1 0;
        min-width: 12rem;
    }
    &__heading-score,
    &__heading-rating {
        min-width: 5.625rem;
        flex: 0 0 auto;
        text-align: center;
    }
    &__body-number {
        font-size: 1.125rem;
        min-width: 1.875rem;
        flex: 0 0 auto;
    }
    &__body-name,
    &__body-region {
        font-size: 1.125rem;
        flex: 1 1 0;
        min-width: 12rem;
    }
    &__body-score {
        font-size: 1.125rem;
        min-width: 5.625rem;
        flex: 0 0 auto;
        text-align: center;
    }
    &__body-rating {
        font-size: 1.125rem;
        min-width: 5.625rem;
        flex: 0 0 auto;
        @include flex(row,
        center,
        center);
    }
}

// Rating Circles
.rating {
    @include flex(row,
    center,
    center);
    text-align: center;
    border-radius: 50%;
    font-weight: bold;
    flex: 0 0 clamp(1rem, 5vw, 3rem);
    min-width: 0;
    height: clamp(1rem, 5vw, 3rem);
    font-size: clamp(0.5rem, 1.5vw, 1rem);
    $ratings: ( aaa: #009a44, aa: #91bd00, a: #a5c91f, bbb: #d9b600, bb: #d9ce04, b: #efe31e, ccc: #d96400, cc: #d99c00, c: #f0ae13, d: #d92804, );
    @each $key,
    $color in $ratings {
        &--#{$key} {
            border: 2px solid $color;
            color: $color;
        }
    }
}


// =====================================
// RESPONSIVE BREAKPOINTS
// ===================================== 
html {
    font-size: clamp(10px, 1vw + 0.5rem, 16px);
}

.layout {
    width: min(90%, 1200px);
}

.table__heading-number {
    flex: 0 0 clamp(1rem, 4vw, 1.875rem);
    min-width: 0;
    font-size: clamp(1rem, 2vw, 1.25rem);
}

.table__heading-name,
.table__heading-region {
    flex: 1 1 clamp(3rem, 20vw, 12rem);
    min-width: 0;
    font-size: clamp(0.9rem, 2vw, 1.25rem);
}

.table__heading-score,
.table__heading-rating {
    flex: 1 1 clamp(2rem, 8vw, 5.625rem);
    min-width: 0;
    text-align: center;
    font-size: clamp(0.9rem, 2vw, 1.25rem);
}

.table__body-number {
    flex: 0 0 clamp(1rem, 4vw, 1.875rem);
    min-width: 0;
    font-size: clamp(0.8rem, 2vw, 1.125rem);
}

.table__body-name,
.table__body-region {
    flex: 1 1 clamp(3rem, 20vw, 12rem);
    min-width: 0;
    font-size: clamp(0.8rem, 2vw, 1.125rem);
}

.table__body-score,
.table__body-rating {
    flex: 1 1 clamp(2rem, 8vw, 5.625rem);
    min-width: 0;
    font-size: clamp(0.8rem, 2vw, 1.125rem);
    text-align: center;
}

// ==========================
// Tablet (<=768px)
// ==========================
@media (max-width: 768px) {
    .carousel__track {
        gap: 1.5rem;
    }
    .carousel__card {
        min-height: clamp(12rem, 20vw, 14rem);
    }
    .top-emitter__list {
        grid-template-columns: repeat( auto-fit, minmax(clamp(200px, 30vw, 250px), 1fr));
    }
    .top-emitter__card {
        max-width: 200px;
    }
}

// ==========================
// Phone (<=480px)
// ==========================
@media (max-width: 480px) {
    .switcher__btn {
        font-size: 1rem;
    }
    .switcher__icon {
        width: 1rem;
        height: 1rem;
    }
    .carousel__track {
        flex-direction: column;
        gap: 1rem;
        height: 60vh;
        align-items: center;
        padding: 0;
    }
    .carousel__card {
        width: 60%;
        min-height: 12rem;
    }
    .carousel__btn-box {
        position: absolute;
        top: 50%;
        right: -3%;
        transform: rotate(90deg) translateY(-50%);
        transform-origin: center;
    }
    .top-emitter__card {
        width: 50%;
    }
    .stats {
        flex-wrap: wrap;
    }
    .stats__stat {
        flex: 0 0 calc(50% - 1rem);
    }
}